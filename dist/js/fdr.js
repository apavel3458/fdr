var timeout=null,app=new Vue({el:"#app",data:{patientName:"",targetweight:80,unit:"kg",startingdoseAm:40,startingdosePm:"",level1bid:!1,level3bid:!1,level4bid:!1,level4metolazone:!1,dangerInstruction:"call your family doctor",display:"fdr",firstDisplayChange:!0,wRows:30,wCurrentRowHighlighted:!1},created:function(){this.translate()},watch:{unit:function(t,e){"kg"==t&&"lb"==e?(this.targetweight=.454*this.targetweight,this.targetweight=Math.round(10*this.targetweight)/10):"lb"==t&&"kg"==e&&(this.targetweight=2.205*this.targetweight,this.targetweight=Math.round(this.targetweight))},level4metolazone:function(t,e){1==t&&0==e&&alert("Recommend prescribing 2.5mg of metolazone.")}},computed:{targetweightI:{get:function(){return this.targetweight},set:function(t){clearTimeout(timeout);var e=this;timeout=setTimeout(function(){e.setWeight(t)},500)}},startingdoseAmI:{get:function(){return this.startingdoseAm},set:function(t){clearTimeout(timeout);var e=this;timeout=setTimeout(function(){e.startingdoseAm=t},300)}},startingdosePmI:{get:function(){return this.startingdosePm},set:function(t){clearTimeout(timeout);var e=this;timeout=setTimeout(function(){e.startingdosePm=t},300)}},level2bid:function(){return""!=this.startingdoseAm&&""!=this.startingdosePm},ready:function(){return""!=this.targetweight&&""!=this.startingdose},level1b:function(){return this.formatNumber(this.level2a-.1)},level2a:function(){return"kg"==this.unit?this.formatNumber(this.targetweight-1):this.formatNumber(this.targetweight-2)},level2b:function(){return this.formatNumber(this.level3a-.1)},level3a:function(){return"kg"==this.unit?this.formatNumber(this.targetweight+1.5):this.formatNumber(this.targetweight+2)},level3b:function(){return this.formatNumber(this.level4a-.1)},level4a:function(){return"kg"==this.unit?this.formatNumber(this.targetweight+2.1):this.formatNumber(this.targetweight+4)},level1dose:function(){var t=this.startingdoseAm+this.startingdosePm;return(t=parseInt(t))<160?(this.level1bid=!1,this.roundTo40(t/2)):160<=t&&t<240?(this.level1bid=!1,this.roundTo40(t/2)):240<=t?(this.level1bid=!0,this.roundTo40(t/3)):void 0},level2dose:function(){return this.startingdoseAm+this.startingdosePm},level3dose:function(){var t=this.startingdoseAm+this.startingdosePm;return t=parseInt(t),this.level3bid=this.level2bid,0==t?(this.level3bid=!1,20):t<=40?this.level3bid?this.roundTo40(t):this.roundTo40(2*t):t<=80?(this.level3bid=!0,80):t<=160?(this.level3bid=!0,120):t<=240?(this.level3bid=!0,160):void(240<t&&(alert("Lasix dose is too high, recommend making a custom regimen"),this.startingdoseAm="",this.startingdosePm=""))},level4dose:function(){return total=this.startingdoseAm+this.startingdosePm,this.level4bid=!0,this.level4metolazone=!1,0==total?(this.level4bid=!1,40):total<=20?(this.level4bid=!1,80):total<=40?this.roundTo40(4*total/2):total<=80?this.roundTo40(1.5*total):total<100?120:total<=160?160:160<total?(this.level4metolazone=!0,160):void 0}},methods:{setWeight:function(t){"kg"==this.unit?this.targetweight=this.formatNumber(Math.round(10*t)/10):"lb"==this.unit&&(this.targetweight=this.formatNumber(Math.round(10*t)/10))},formatNumber:function(t){return"kg"==this.unit?parseFloat(t.toFixed(1)):"lb"==this.unit?parseFloat(t.toFixed(1)):void 0},nowDate:function(){return moment().format("MMMM Do YYYY")},roundTo40:function(t){return 40*Math.floor(t/40)},numberOfTablets:function(t){var e=t/40;return"0"==e.toFixed(0)?null:e<=1?e+" tablet":e+" tablets"},changeInstruction:function(t){if($("#instructionModal").modal("hide"),""==t)return null;this.dangerInstruction=$(t.target).text()},translate:function(){},toggleWeightTable:function(){"weightTable"==this.display?this.display="fdr":"fdr"==this.display&&(this.display="weightTable")},wDate:function(t){return moment().add(t,"days").format("MMMM DD, YYYY")},wDateDay:function(t){return moment().add(t,"days").format("dddd")},highlight:function(t){var e=parseInt(t)-parseInt(moment().day());return e-=1,Math.floor(e/7)%2==1}}});function googleTranslateElementInit(){new google.translate.TranslateElement({pageLanguage:"en"},"google_translate_element")}function inputWidth(t,e,i){$(this)}$.fn.textWidth=function(t,e){$.fn.textWidth.fakeEl||($.fn.textWidth.fakeEl=$("<span>").hide().appendTo(document.body)),$.fn.textWidth.fakeEl.text(t||this.val()||this.text()||this.attr("placeholder")).css("font",e||this.css("font"));return $.fn.textWidth.fakeEl.width()+20},$(".width-dynamic").on("input",function(){var t=$(this).textWidth();$(this).css({width:t})}).trigger("input");var targetElem=$(".width-dynamic");inputWidth(targetElem);
